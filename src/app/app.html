<div class="max-w-6xl mx-auto px-4 py-6">
  <header class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-2xl font-bold text-slate-900">Gerenciador de Tarefas - Estudos</h1>
      <p class="text-slate-500">Clique no botão <span class="font-semibold">+</span> para adicionar tarefa.</p>
    </div>

    <button
      (click)="open()"
      aria-label="Adicionar tarefa"
      class="w-10 h-10 rounded-full bg-indigo-600 text-white flex items-center justify-center text-2xl hover:bg-indigo-700">
      +
    </button>
  </header>

  <!-- Modal -->
  <div *ngIf="showModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div class="bg-white rounded-xl shadow-xl w-full max-w-2xl p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">{{ editingTaskId ? 'Editar tarefa' : 'Nova tarefa' }}</h2>
        <button (click)="close()" aria-label="Fechar" class="text-slate-500 text-xl">×</button>
      </div>

      <form (ngSubmit)="save()" #f="ngForm" class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="md:col-span-2">
          <label class="block text-sm text-slate-700">Título</label>
          <input name="title" [(ngModel)]="title" required maxlength="80" class="w-full mt-1 p-2 border rounded" />
        </div>

        <div>
          <label class="block text-sm text-slate-700">Data término</label>
          <input type="date" name="due" [(ngModel)]="due" required class="w-full mt-1 p-2 border rounded" />
        </div>

        <div>
          <label class="block text-sm text-slate-700">Nível</label>
          <select name="level" [(ngModel)]="level" class="w-full mt-1 p-2 border rounded">
            <option value="low">Baixo</option>
            <option value="medium">Médio</option>
            <option value="high">Alto</option>
          </select>
        </div>

        <div>
          <label class="block text-sm text-slate-700">Status</label>
          <select name="status" [(ngModel)]="status" class="w-full mt-1 p-2 border rounded">
            <option value="todo">Para fazer</option>
            <option value="doing">Em andamento</option>
            <option value="done">Concluída</option>
          </select>
        </div>

        <div class="md:col-span-3">
          <label class="block text-sm text-slate-700">Descrição</label>
          <textarea name="desc" [(ngModel)]="desc" rows="2" class="w-full mt-1 p-2 border rounded"></textarea>
        </div>

        <div class="md:col-span-3 text-right">
          <button
            type="submit"
            class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"
            [disabled]="!f.form.valid">
            {{ editingTaskId ? 'Salvar alterações' : 'Salvar tarefa' }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Dashboard envia eventos para o App -->
  <app-dashboard
    (editTask)="onEditTask($event)"
    (removeTask)="onRemoveTask($event)">
  </app-dashboard>
</div>
